```bash

git clone https://chromium.googlesource.com/chromium/tools/depot_tools.git

export PATH=/home/tannal/tannalwork/projects/depot_tools:$PATH

mkdir v8 && cd v8

fetch v8

./tools/dev/gm.py x64.release
./tools/dev/gm.py x64.debug

tools/dev/update-compile-commands.py

# autoninja -C out/x64.debug d8
ninja: Entering directory `out/x64.debug'
[2477/2477] LINK ./d8

real	8m57.143s
user	198m43.792s
sys	7m56.004s



autoninja -C out/x64.release torque-language-server
autoninja -C out/x64.debug torque-language-server


```

# builtins torque

.tq file is like Typescript in v8

we can use debug print to print value

Print itself is basically for diagnostic

see src/diagnostics/objects-printer.cc

most ecmascript implementation in .tq files

fast path & object shape optimization in v8

CodeStubAssembler

builtins handwriting assembly

TurboFan optimizing compiler

.js -> .tq

calls to V8’s C++ code via trampolines

by taking advantage of V8’s custom register-based ABI that it uses internally to call JavaScript functions.


# JsArray in v8

src/objects/js-array.h
src/objects/context.h

elements FixedArray in src/objects/fixed-array.h

IsCowArray

```js

const arr = [1, 2, 3, 4]

DebugPrint: 0x1cb3001c9459: [JSArray]
 # PrintHeader
 - map: 0x1cb3000ce6b1 <Map[16](PACKED_SMI_ELEMENTS)> [FastProperties]

 # JSObjectPrintHeader
 - prototype: 0x1cb3000ce925 <JSArray[0]>
 - elements: 0x1cb3000d9c39 <FixedArray[4]> [PACKED_SMI_ELEMENTS (COW)]
 - length: 4
 - properties: 0x1cb3000006cd <FixedArray[0]>
 - All own properties (excluding elements): {
    0x1cb300000d41: [String] in ReadOnlySpace: #length: 0x1cb30030ed25 <AccessorInfo name= 0x1cb300000d41 <String[6]: #length>, data= 0x1cb300000061 <undefined>> (const accessor descriptor), location: descriptor
 }
 - elements: 0x1cb3000d9c39 <FixedArray[4]> {
           0: 1
           1: 2
           2: 3
           3: 4
 }

# PrintHeapObjectHeaderWithoutMap
0x1cb3000ce6b1: [Map] in OldSpace

# Map::MapPrint
 - map: 0x1cb3000c3c29 <MetaMap (0x1cb3000c3c79 <NativeContext[285]>)>
 - type: JS_ARRAY_TYPE
 - instance size: 16
 - inobject properties: 0
 - unused property fields: 0
 - elements kind: PACKED_SMI_ELEMENTS
 - enum length: invalid
 - back pointer: 0x1cb300000061 <undefined>
 - prototype_validity cell: 0x1cb300000a31 <Cell value= 1>
 - instance descriptors #1: 0x1cb3000cef3d <DescriptorArray[1]>
 - transitions #1: 0x1cb3000cef59 <TransitionArray[4]>Transition array #1:
     0x1cb300000e05 <Symbol: (elements_transition_symbol)>: (transition to HOLEY_SMI_ELEMENTS) -> 0x1cb3000cef71 <Map[16](HOLEY_SMI_ELEMENTS)>

 - prototype: 0x1cb3000ce925 <JSArray[0]>
 - constructor: 0x1cb3000ce61d <JSFunction Array (sfi = 0x1cb30033538d)>
 - dependent code: 0x1cb3000006dd <Other heap object (WEAK_ARRAY_LIST_TYPE)>
 - construction counter: 0


```


Object in programming language is just a collection of properties and methods.


So js Array in V8 has a bunch of properties like

map 


# reference

https://github.com/danbev/learning-v8

# community

https://groups.google.com/g/v8-users

https://www.mail-archive.com/search?q=trampoline&l=v8-dev%40googlegroups.com